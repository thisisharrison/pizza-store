(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{182:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return oe}));var a=n(0),r=n.n(a),o=n(13),c=n(46),i=n(47),s=n(141),l=n.n(s),d=n(190),u=n(185),j=n(191),b=n(192),p=n(193),f=n(3),x=r.a.memo((function(e){var t=e.orders,n=Object(c.b)(),a=Object(o.a)(n,2)[1],r=Object(i.b)().enqueueSnackbar,s=function(e){a({type:"delete",payload:e}),r("Item is removed",{variant:"info"})};return Object(f.jsx)(d.a,{children:t.map((function(e){return Object(f.jsx)(h,{order:e,onRemove:s},e.id)}))})})),h=r.a.memo((function(e){var t=e.order,n=e.onRemove;return Object(f.jsxs)(u.a,{disablePadding:!0,children:[Object(f.jsx)(j.a,{children:Object(f.jsx)(b.a,{onClick:function(){return n(t.id)},role:"remove",children:Object(f.jsx)(l.a,{color:"primary","aria-label":"remove"})})}),Object(f.jsx)(p.a,{sx:{width:.8},primary:"".concat(t.quantity," x ").concat(t.name),secondary:"".concat(t.size,", ").concat(t.toppings)}),Object(f.jsx)(p.a,{sx:{textAlign:"right",width:.2},primary:"".concat("$"+t.price)})]})})),m=n(144),O=n.n(m),y="https://hidden-springs-06951.herokuapp.com/",v="http://localhost:8080",g="localhost"===window.location.hostname?v:y;O.a.defaults.headers.get["Content-Type"]="application/json",O.a.defaults.headers.post["Content-Type"]="application/json";var k=Object.freeze({toArray:function(e){return Object.keys(e).map((function(t){return e[t]}))},reduceByKey:function(e,t){return Object.keys(e).reduce((function(n,a){return n+e[a][t]}),0)}}),C=n(204),w=n(194),z=n(195),S=n(187),A=n(196),W=function(){var e=Object(c.b)(),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(i.b)().enqueueSnackbar,l=n.orders,d=r.a.useMemo((function(){return null===l?[]:k.toArray(l)}),[l]),u=r.a.useMemo((function(){return null===l?0:k.reduceByKey(l,"price")}),[l]),j=u>0;return Object(f.jsxs)(C.a,{sx:{p:1,m:1,width:[1,1,.3],display:"flex",flexDirection:"column",justifyContent:"center"},"data-testid":"basket",children:[Object(f.jsxs)(C.a,{component:"form",onSubmit:function(e){if(e.preventDefault(),l){var t,n=Object.values(l);(t=n,O.a.post(g+"/api/orders",t)).then((function(e){a({type:"submit"}),console.info("submit to API: ",e),s("Your order is in the kitchen!",{variant:"success"})})).catch((function(e){if(400===e.response.status){var t=e.response.data,n=t.name,a=t.errors;console.error("api error: ",n);var r=Object.keys(a).join(", ");s("Your order was not successful! Check ".concat(r,"."),{variant:"error"})}}))}},sx:{bgcolor:"#f3f2f2",borderRadius:1,overflow:"hidden",p:2},children:[Object(f.jsx)(C.a,{component:"div",sx:{maxHeight:"65vh",height:"75%",overflow:"auto",overflowY:"scroll"},children:u?Object(f.jsx)(x,{orders:d}):Object(f.jsx)(w.a,{variant:"body1",align:"center",sx:{mt:4},children:"No items in your basket"})}),Object(f.jsx)(z.a,{variant:"middle",sx:{my:3}}),Object(f.jsxs)(C.a,{display:"flex",flexWrap:"wrap",justifyContent:"flex-end",role:"order-total",children:[Object(f.jsx)(w.a,{variant:"body1",sx:{fontWeight:700},children:"Total"}),Object(f.jsxs)(w.a,{variant:"body1",sx:{fontWeight:700,ml:4},children:["$ ",u]})]}),Object(f.jsx)(S.a,{type:"submit",variant:"contained",fullWidth:!0,disabled:!j,sx:{my:4},children:"Checkout"})]}),Object(f.jsx)(A.a,{variant:"h6",component:"button",disabled:!j,align:"center",href:"#",underline:j?"always":"none",sx:{fontWeight:400,color:j?"grey[400]":"#d5d5d5",my:3,":hover":{cursor:j?"pointer":"auto"}},onClick:function(){a({type:"clear"}),s("Basket cleared!",{variant:"info"})},children:"Empty Basket"})]})},I=n(6),M=n.p+"static/media/pizza.98ab3b9b.jpg",P=n(17),B=n(183),R=Object(P.a)(B.a)((function(e){var t,n=e.theme;return t={position:"relative",height:140},Object(I.a)(t,n.breakpoints.down("md"),{width:"100% !important",height:300}),Object(I.a)(t,"&:hover, &.Mui-focusVisible",{zIndex:1,"& .MuiImageBackdrop-root":{opacity:.15},"& .MuiImageMarked-root":{opacity:0},"& .MuiTypography-root":{border:"4px solid currentColor"}}),t})),q=Object(P.a)("span")({position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center",borderRadius:8}),T=Object(P.a)("span")((function(e){var t=e.theme;return{position:"absolute",left:0,right:0,top:0,bottom:0,borderRadius:8,backgroundColor:t.palette.common.black,opacity:.2,transition:t.transitions.create("opacity"),":hover":{opacity:0}}})),D=r.a.memo((function(e){var t=e.onClick;return Object(f.jsx)(C.a,{sx:{display:"flex",flexWrap:"wrap",width:"100%"},children:Object(f.jsxs)(R,{focusRipple:!0,style:{width:"100%"},onClick:t,role:"dialog-image",children:[Object(f.jsx)(q,{style:{backgroundImage:"url(".concat(M,")")}}),Object(f.jsx)(T,{})]})})})),Y=n(197),$=n(199),F=n(200),G=r.a.memo((function(e){var t=e.item,n=e.onClick,a=Object(c.b)(),r=Object(o.a)(a,2)[1],i=t.name,s=t.price,l=function(){r({type:"edit",payload:{name:i,price:s}}),n()};return Object(f.jsxs)(Y.a,{variant:"outlined",sx:{width:[1,1,.3],m:1,borderColor:"#e9e9e9",textAlign:"center",borderRadius:4},children:[Object(f.jsxs)($.a,{children:[Object(f.jsx)(D,{onClick:l}),Object(f.jsxs)(w.a,{variant:"body1",color:"text.secondary",sx:{mt:2},children:[i," - ","$"+s]})]}),Object(f.jsx)(F.a,{sx:{display:"flex",justifyContent:"center",mb:2,mx:1},children:Object(f.jsx)(S.a,{variant:"contained",fullWidth:!0,onClick:l,role:"dialog-button",children:"Choose"})})]})})),H=n(9),J=n(19),K=n(181),N=n(188),V=n(189),E=n(201),L=n(202),Q=n(186),U=n(180),X=n(184),Z=n(203),_=Array.from({length:9}).map((function(e,t){return"Pizza Topping #".concat(t+1)})),ee=Array.from({length:3}).map((function(e,t){return"Pizza Size #".concat(t+1)}));function te(e){var t=e.open,n=e.onClose,r=a.useState({toppings:[],size:"Pizza Size #1"}),c=Object(o.a)(r,2),s=c[0],l=c[1],j=Object(i.b)().enqueueSnackbar,b=function(){n(null)},p=function(e){var t=e.target.name,n=-1!==s.toppings.indexOf(t),a=Object(J.a)(s.toppings);a=n?a.filter((function(e){return e!==t})):Array.from(new Set([t].concat(Object(J.a)(a)))),l((function(e){return Object(H.a)(Object(H.a)({},e),{},{toppings:a})}))};return Object(f.jsx)(K.a,{onClose:b,open:t,maxWidth:"lg",role:"dialog",children:Object(f.jsxs)(C.a,{component:"form",onSubmit:function(e){e.preventDefault(),s.toppings.length>0?n(s):j("Must choose at least one topping",{variant:"error"})},children:[Object(f.jsxs)(N.a,{children:[Object(f.jsx)(C.a,{children:Object(f.jsx)(V.a,{children:Object(f.jsx)(E.a,{children:Object(f.jsx)(d.a,{sx:{columnCount:[1,2,3]},children:_.map((function(e){var t=-1!==s.toppings.indexOf(e);return Object(f.jsx)(u.a,{disablePadding:!0,sx:{breakInside:"avoid"},children:Object(f.jsx)(L.a,{control:Object(f.jsx)(Q.a,{checked:t,onChange:p,name:e}),label:e})},e)}))})})})}),Object(f.jsx)(C.a,{children:Object(f.jsx)(V.a,{children:Object(f.jsx)(U.a,{"aria-label":"size",defaultValue:ee[0],name:"size",value:s.size,onChange:function(e){l((function(t){return Object(H.a)(Object(H.a)({},t),{},{size:e.target.value})}))},children:ee.map((function(e){return Object(f.jsx)(L.a,{control:Object(f.jsx)(X.a,{}),value:e,label:e},e)}))})})})]}),Object(f.jsx)(Z.a,{children:Object(f.jsxs)(C.a,{display:"flex",flexGrow:"1",justifyContent:"space-evenly",children:[Object(f.jsx)(S.a,{variant:"contained",type:"submit",fullWidth:!0,sx:{m:2},children:"Add to Basket"}),Object(f.jsx)(S.a,{variant:"contained",color:"secondary",onClick:b,fullWidth:!0,sx:{m:2},children:"Cancel"})]})})]})})}function ne(e){var t=e.open,n=e.onClose,a=Object(c.b)(),r=Object(o.a)(a,2),s=r[0],l=r[1],d=Object(i.b)().enqueueSnackbar,u=s.editing;return Object(f.jsx)(te,{open:t,onClose:function(e){e?(l({type:"create",payload:Object(H.a)(Object(H.a)({quantity:1},u),e),toast:"create"}),d("Added an item to Basket",{variant:"success"})):l({type:"edit",payload:null}),n()}},u?u.id:"none")}var ae=Array.from({length:6}).map((function(e,t){return{id:t,name:"Pizza Name ".concat(t+1),price:99}})),re=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(C.a,{sx:{flexGrow:1,width:[1,1,.7],display:"flex",flexWrap:"wrap",my:1},children:ae.map((function(e){return Object(f.jsx)(G,{item:e,onClick:function(){return a(!0)}},e.id)}))}),Object(f.jsx)(ne,{open:n,onClose:function(){return a(!1)}})]})};function oe(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(C.a,{sx:{display:"flex",flexDirection:["column","column","row"],alignItems:"flex-start",minHeight:"100vh"},children:[Object(f.jsx)(re,{}),Object(f.jsx)(W,{})]})})}}}]);
//# sourceMappingURL=4.9baf8fae.chunk.js.map