{"version":3,"sources":["utils/hooks/useAsync.tsx","module/Profile/index.tsx"],"names":["reducer","state","action","type","error","loading","data","Error","Todo","fn","deps","React","useReducer","dispatch","useEffect","promise","then","response","useAsync","axios","get","headers","accept","createTroubles","useCallback","onClick","JSON","stringify","undefined"],"mappings":"uMAUA,SAASA,EAAcC,EAAoBC,GACvC,OAAQA,EAAOC,MACX,IAAK,UACD,OAAO,2BACAF,GADP,IAEIG,MAAO,KACPC,QAASJ,EAAMI,QAAU,IAEjC,IAAK,WACD,OAAO,2BACAJ,GADP,IAEIG,MAAO,KACPC,QAASJ,EAAMI,QAAU,EACzBC,KAAMJ,EAAOI,OAErB,IAAK,WACD,OAAO,2BACAL,GADP,IAEIG,MAAOF,EAAOE,MACdC,QAASJ,EAAMI,QAAU,IAEjC,QACI,MAAM,IAAIE,MAAJ,iCAAoCL,K,WCvBvC,SAASM,IACpB,IAOMP,EDmBH,SAAwBQ,EAAsBC,GAAc,IAAD,EACpCC,IAAMC,WAAWZ,EAAS,CAChDI,MAAO,KACPC,QAAS,EACTC,KAAM,OAJoD,mBACvDL,EADuD,KAChDY,EADgD,KAwB9D,OAjBAF,IAAMG,WAAU,WACZ,IAAMC,EAAUN,IACXM,IAGLF,EAAS,CAAEV,KAAM,YACjBY,EAAQC,MACJ,SAACC,GACGJ,EAAS,CAAEV,KAAM,WAAYG,KAAMW,EAASX,UAEhD,SAACF,GACGS,EAAS,CAAEV,KAAM,WAAYC,gBAItCM,GAEIT,EC3COiB,EAPI,kBACdC,IAAMC,IAAU,8BAA+B,CAC3CC,QAAS,CACLC,OAAQ,wBAIc,IAE5BC,EAAiBZ,IAAMa,aAAY,WACrC,MAAM,IAAIjB,MAAM,UACjB,IAEH,OACI,gCACI,oBAAIkB,QAASF,EAAb,qBACA,8BAAMG,KAAKC,UAAU1B,OAAO2B,EAAW","file":"static/js/5.0cd33818.chunk.js","sourcesContent":["import React from \"react\";\n\ninterface State<T, E> {\n    loading: number;\n    error: E;\n    data: T;\n}\n\ntype Action<T, E = string> = { type: \"pending\" } | { type: \"resolved\"; data: T } | { type: \"rejected\"; error: E };\n\nfunction reducer<T, E>(state: State<T, E>, action: Action<T, E>) {\n    switch (action.type) {\n        case \"pending\":\n            return {\n                ...state,\n                error: null,\n                loading: state.loading + 1,\n            };\n        case \"resolved\":\n            return {\n                ...state,\n                error: null,\n                loading: state.loading - 1,\n                data: action.data,\n            };\n        case \"rejected\":\n            return {\n                ...state,\n                error: action.error,\n                loading: state.loading - 1,\n            };\n        default:\n            throw new Error(`Unhandled action type: ${action}`);\n    }\n}\n\nexport function useAsync<T, E>(fn: () => Promise<T>, deps: any[]) {\n    const [state, dispatch] = React.useReducer(reducer, {\n        error: null,\n        loading: 0,\n        data: null,\n    });\n\n    React.useEffect(() => {\n        const promise = fn();\n        if (!promise) {\n            return;\n        }\n        dispatch({ type: \"pending\" });\n        promise.then(\n            (response: any) => {\n                dispatch({ type: \"resolved\", data: response.data });\n            },\n            (error: E) => {\n                dispatch({ type: \"rejected\", error });\n            }\n        );\n        // eslint-disable-next-line\n    }, deps);\n\n    return state;\n}\n","import axios from \"axios\";\nimport React from \"react\";\nimport { useAsync } from \"../../utils/hooks/useAsync\";\n\ninterface Joke {\n    id: string;\n    joke: string;\n    status: number;\n}\nexport default function Todo() {\n    const fetchUser = () =>\n        axios.get<Joke>(\"https://icanhazdadjoke.com/\", {\n            headers: {\n                accept: \"application/json\",\n            },\n        });\n\n    const state = useAsync(fetchUser, []);\n\n    const createTroubles = React.useCallback(() => {\n        throw new Error(\"bar!\");\n    }, []);\n\n    return (\n        <div>\n            <h2 onClick={createTroubles}>Profile</h2>\n            <pre>{JSON.stringify(state, undefined, 2)}</pre>\n        </div>\n    );\n}\n"],"sourceRoot":""}