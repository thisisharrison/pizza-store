(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{153:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ee}));var a=n(0),r=n.n(a),o=n(13),c=n(46),i=n(47),s=n(130),l=n.n(s),d=n(160),u=n(155),j=n(161),b=n(162),x=n(163),p=n(3),f=r.a.memo((function(e){var t=e.orders,n=Object(c.b)(),a=Object(o.a)(n,2)[1],r=Object(i.b)().enqueueSnackbar,s=function(e){a({type:"delete",payload:e}),r("Item is removed",{variant:"info"})};return Object(p.jsx)(d.a,{children:t.map((function(e){return Object(p.jsx)(m,{order:e,onRemove:s},e.id)}))})})),m=r.a.memo((function(e){var t=e.order,n=e.onRemove;return Object(p.jsxs)(u.a,{disablePadding:!0,children:[Object(p.jsx)(j.a,{children:Object(p.jsx)(b.a,{onClick:function(){return n(t.id)},role:"remove",children:Object(p.jsx)(l.a,{color:"primary","aria-label":"remove"})})}),Object(p.jsx)(x.a,{sx:{width:.8},primary:"".concat(t.quantity," x ").concat(t.name),secondary:"".concat(t.size,", ").concat(t.toppings)}),Object(p.jsx)(x.a,{sx:{textAlign:"right",width:.2},primary:"".concat("$"+t.price)})]})}));var h=Object.freeze({toArray:function(e){return Object.keys(e).map((function(t){return e[t]}))},reduceByKey:function(e,t){return Object.keys(e).reduce((function(n,a){return n+e[a][t]}),0)}}),O=n(174),y=n(164),g=n(165),v=n(157),k=n(166),C=r.a.memo((function(){var e=Object(c.b)(),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(i.b)().enqueueSnackbar,l=n.orders,d=r.a.useMemo((function(){return null===l?[]:h.toArray(l)}),[l]),u=r.a.useMemo((function(){return null===l?0:h.reduceByKey(l,"price")}),[l]),j=u>0;return Object(p.jsxs)(O.a,{sx:{p:1,m:1,width:[1,1,.3],display:"flex",flexDirection:"column",justifyContent:"center"},"data-testid":"basket",children:[Object(p.jsxs)(O.a,{component:"form",onSubmit:function(e){e.preventDefault(),console.log("submit to API: ",l),a({type:"submit"}),s("Your order is in the kichen!",{variant:"success"})},sx:{bgcolor:"#f3f2f2",borderRadius:1,overflow:"hidden",p:2},children:[Object(p.jsx)(O.a,{component:"div",sx:{maxHeight:"65vh",height:"75%",overflow:"auto",overflowY:"scroll"},children:u?Object(p.jsx)(f,{orders:d}):Object(p.jsx)(y.a,{variant:"body1",align:"center",sx:{mt:4},children:"No items in your basket"})}),Object(p.jsx)(g.a,{variant:"middle",sx:{my:3}}),Object(p.jsxs)(O.a,{display:"flex",flexWrap:"wrap",justifyContent:"flex-end",role:"order-total",children:[Object(p.jsx)(y.a,{variant:"body1",sx:{fontWeight:700},children:"Total"}),Object(p.jsxs)(y.a,{variant:"body1",sx:{fontWeight:700,ml:4},children:["$ ",u]})]}),Object(p.jsx)(v.a,{type:"submit",variant:"contained",fullWidth:!0,disabled:!j,sx:{my:4},children:"Checkout"})]}),Object(p.jsx)(k.a,{variant:"h6",component:"button",disabled:!j,align:"center",href:"#",underline:j?"always":"none",sx:{fontWeight:400,color:j?"grey[400]":"#d5d5d5",my:3,":hover":{cursor:j?"pointer":"auto"}},onClick:function(){a({type:"clear"}),s("Basket cleared!",{variant:"info"})},children:"Empty Basket"})]})})),w=n(6),z=n.p+"static/media/pizza.98ab3b9b.jpg",S=n(17),A=n(152),W=Object(S.a)(A.a)((function(e){var t,n=e.theme;return t={position:"relative",height:140},Object(w.a)(t,n.breakpoints.down("md"),{width:"100% !important",height:300}),Object(w.a)(t,"&:hover, &.Mui-focusVisible",{zIndex:1,"& .MuiImageBackdrop-root":{opacity:.15},"& .MuiImageMarked-root":{opacity:0},"& .MuiTypography-root":{border:"4px solid currentColor"}}),t})),I=Object(S.a)("span")({position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center",borderRadius:8}),M=Object(S.a)("span")((function(e){var t=e.theme;return{position:"absolute",left:0,right:0,top:0,bottom:0,borderRadius:8,backgroundColor:t.palette.common.black,opacity:.2,transition:t.transitions.create("opacity"),":hover":{opacity:0}}})),P=r.a.memo((function(e){var t=e.onClick;return Object(p.jsx)(O.a,{sx:{display:"flex",flexWrap:"wrap",width:"100%"},children:Object(p.jsxs)(W,{focusRipple:!0,style:{width:"100%"},onClick:t,role:"dialog-image",children:[Object(p.jsx)(I,{style:{backgroundImage:"url(".concat(z,")")}}),Object(p.jsx)(M,{})]})})})),B=n(167),R=n(169),q=n(170),D=r.a.memo((function(e){var t=e.item,n=e.onClick,a=Object(c.b)(),r=Object(o.a)(a,2)[1],i=t.name,s=t.price,l=function(){r({type:"edit",payload:{name:i,price:s}}),n()};return Object(p.jsxs)(B.a,{variant:"outlined",sx:{width:[1,1,.3],m:1,borderColor:"#e9e9e9",textAlign:"center",borderRadius:4},children:[Object(p.jsxs)(R.a,{children:[Object(p.jsx)(P,{onClick:l}),Object(p.jsxs)(y.a,{variant:"body1",color:"text.secondary",sx:{mt:2},children:[i," - ","$"+s]})]}),Object(p.jsx)(q.a,{sx:{display:"flex",justifyContent:"center",mb:2,mx:1},children:Object(p.jsx)(v.a,{variant:"contained",fullWidth:!0,onClick:l,role:"dialog-button",children:"Choose"})})]})})),T=n(9),$=n(19),F=n(151),G=n(158),H=n(159),J=n(171),K=n(172),N=n(156),V=n(150),Y=n(154),E=n(173),L=Array.from({length:9}).map((function(e,t){return"Pizza Topping #".concat(t+1)})),Q=Array.from({length:3}).map((function(e,t){return"Pizza Size #".concat(t+1)}));function U(e){var t=e.open,n=e.onClose,r=a.useState({toppings:[],size:"Pizza Size #1"}),c=Object(o.a)(r,2),s=c[0],l=c[1],j=Object(i.b)().enqueueSnackbar,b=function(){n(null)},x=function(e){var t=e.target.name,n=-1!==s.toppings.indexOf(t),a=Object($.a)(s.toppings);a=n?a.filter((function(e){return e!==t})):Array.from(new Set([t].concat(Object($.a)(a)))),l((function(e){return Object(T.a)(Object(T.a)({},e),{},{toppings:a})}))};return Object(p.jsx)(F.a,{onClose:b,open:t,maxWidth:"lg",role:"dialog",children:Object(p.jsxs)(O.a,{component:"form",onSubmit:function(e){e.preventDefault(),s.toppings.length>0?n(s):j("Must choose at least one topping",{variant:"error"})},children:[Object(p.jsxs)(G.a,{children:[Object(p.jsx)(O.a,{children:Object(p.jsx)(H.a,{children:Object(p.jsx)(J.a,{children:Object(p.jsx)(d.a,{sx:{columnCount:[2,2,3]},children:L.map((function(e){var t=-1!==s.toppings.indexOf(e);return Object(p.jsx)(u.a,{disablePadding:!0,sx:{breakInside:"avoid"},children:Object(p.jsx)(K.a,{control:Object(p.jsx)(N.a,{checked:t,onChange:x,name:e}),label:e})},e)}))})})})}),Object(p.jsx)(O.a,{children:Object(p.jsx)(H.a,{children:Object(p.jsx)(V.a,{"aria-label":"size",defaultValue:Q[0],name:"size",value:s.size,onChange:function(e){l((function(t){return Object(T.a)(Object(T.a)({},t),{},{size:e.target.value})}))},children:Q.map((function(e){return Object(p.jsx)(K.a,{control:Object(p.jsx)(Y.a,{}),value:e,label:e},e)}))})})})]}),Object(p.jsx)(E.a,{children:Object(p.jsxs)(O.a,{display:"flex",flexGrow:"1",justifyContent:"space-evenly",children:[Object(p.jsx)(v.a,{variant:"contained",type:"submit",fullWidth:!0,sx:{m:2},children:"Add to Basket"}),Object(p.jsx)(v.a,{variant:"contained",color:"secondary",onClick:b,fullWidth:!0,sx:{m:2},children:"Cancel"})]})})]})})}function X(e){var t=e.open,n=e.onClose,a=Object(c.b)(),r=Object(o.a)(a,2),s=r[0],l=r[1],d=Object(i.b)().enqueueSnackbar,u=s.editing;return Object(p.jsx)(U,{open:t,onClose:function(e){e?(l({type:"create",payload:Object(T.a)(Object(T.a)({quantity:1},u),e),toast:"create"}),d("Added an item to Basket",{variant:"success"})):l({type:"edit",payload:null}),n()}},u?u.id:"none")}var Z=Array.from({length:6}).map((function(e,t){return{id:t,name:"Pizza Name ".concat(t+1),price:99}})),_=r.a.memo((function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(O.a,{sx:{flexGrow:1,width:[1,1,.7],display:"flex",flexWrap:"wrap",my:1},children:Z.map((function(e){return Object(p.jsx)(D,{item:e,onClick:function(){return a(!0)}},e.id)}))}),Object(p.jsx)(X,{open:n,onClose:function(){return a(!1)}})]})}));function ee(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(O.a,{sx:{display:"flex",flexDirection:["column","column","row"],alignItems:"flex-start",minHeight:"100vh"},children:[Object(p.jsx)(_,{}),Object(p.jsx)(C,{})]})})}}}]);
//# sourceMappingURL=4.4aa799d0.chunk.js.map