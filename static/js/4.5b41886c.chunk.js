(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{184:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ee}));var a=n(0),r=n.n(a),o=n(14),i=n(50),c=n(51),s=n(161),l=n.n(s),d=n(191),u=n(186),j=n(192),b=n(193),p=n(194),x=n(3),f=r.a.memo((function(e){var t=e.orders,n=Object(i.b)(),a=Object(o.a)(n,2)[1],r=Object(c.b)().enqueueSnackbar,s=function(e){a({type:"delete",payload:e}),r("Item is removed",{variant:"info"})};return Object(x.jsx)(d.a,{children:t.map((function(e){return Object(x.jsx)(h,{order:e,onRemove:s},e.id)}))})})),h=r.a.memo((function(e){var t=e.order,n=e.onRemove;return Object(x.jsxs)(u.a,{disablePadding:!0,children:[Object(x.jsx)(j.a,{children:Object(x.jsx)(b.a,{onClick:function(){return n(t.id)},role:"remove",children:Object(x.jsx)(l.a,{color:"primary","aria-label":"remove"})})}),Object(x.jsx)(p.a,{sx:{width:.8},primary:"".concat(t.quantity," x ").concat(t.name),secondary:"".concat(t.size,", ").concat(t.toppings)}),Object(x.jsx)(p.a,{sx:{textAlign:"right",width:.2},primary:"".concat("$"+t.price)})]})})),m=n(64);var O=Object.freeze({toArray:function(e){return Object.keys(e).map((function(t){return e[t]}))},reduceByKey:function(e,t){return Object.keys(e).reduce((function(n,a){return n+e[a][t]}),0)}}),y=n(205),v=n(195),g=n(196),k=n(188),C=n(197),w=function(e){var t=e.api,n=Object(i.b)(),a=Object(o.a)(n,2),s=a[0],l=a[1],d=Object(c.b)().enqueueSnackbar,u=s.orders,j=r.a.useMemo((function(){return null===u?[]:O.toArray(u)}),[u]),b=r.a.useMemo((function(){return null===u?0:O.reduceByKey(u,"price")}),[u]),p=b>0;return Object(x.jsxs)(y.a,{sx:{p:1,m:1,width:[1,1,.3],display:"flex",flexDirection:"column",justifyContent:"center"},"data-testid":"basket",children:[Object(x.jsxs)(y.a,{component:"form",onSubmit:function(e){if(e.preventDefault(),u){var n=Object.values(u);t?Object(m.a)(n).then((function(e){l({type:"submit"}),console.info("submit to API: ",e),d("The kitchen has received your order!",{variant:"success"})})).catch((function(e){if(400===e.response.status){var t=e.response.data,n=t.name,a=t.errors;console.error("api error: ",n);var r=Object.keys(a).join(", ");d("Your order was not successful! Check ".concat(r,"."),{variant:"error"})}})):(l({type:"submit"}),console.info("mocking API submission: ",n),d("Your order is in the kitchen!",{variant:"success"}))}},sx:{bgcolor:"#f3f2f2",borderRadius:1,overflow:"hidden",p:2},children:[Object(x.jsx)(y.a,{component:"div",sx:{maxHeight:"65vh",height:"75%",overflow:"auto",overflowY:"scroll"},children:b?Object(x.jsx)(f,{orders:j}):Object(x.jsx)(v.a,{variant:"body1",align:"center",sx:{mt:4},children:"No items in your basket"})}),Object(x.jsx)(g.a,{variant:"middle",sx:{my:3}}),Object(x.jsxs)(y.a,{display:"flex",flexWrap:"wrap",justifyContent:"flex-end",role:"order-total",children:[Object(x.jsx)(v.a,{variant:"body1",sx:{fontWeight:700},children:"Total"}),Object(x.jsxs)(v.a,{variant:"body1",sx:{fontWeight:700,ml:4},children:["$ ",b]})]}),Object(x.jsx)(k.a,{type:"submit",variant:"contained",fullWidth:!0,disabled:!p,sx:{my:4},children:"Checkout"})]}),Object(x.jsx)(C.a,{variant:"h6",component:"button",disabled:!p,align:"center",href:"#",underline:p?"always":"none",sx:{fontWeight:400,color:p?"grey[400]":"#d5d5d5",my:3,":hover":{cursor:p?"pointer":"auto"}},onClick:function(){l({type:"clear"}),d("Basket cleared!",{variant:"info"})},children:"Empty Basket"})]})},z=n(6),S=n.p+"static/media/pizza.98ab3b9b.jpg",A=n(18),W=n(183),I=Object(A.a)(W.a)((function(e){var t,n=e.theme;return t={position:"relative",height:140},Object(z.a)(t,n.breakpoints.down("md"),{width:"100% !important",height:300}),Object(z.a)(t,"&:hover, &.Mui-focusVisible",{zIndex:1,"& .MuiImageBackdrop-root":{opacity:.15},"& .MuiImageMarked-root":{opacity:0},"& .MuiTypography-root":{border:"4px solid currentColor"}}),t})),P=Object(A.a)("span")({position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center",borderRadius:8}),M=Object(A.a)("span")((function(e){var t=e.theme;return{position:"absolute",left:0,right:0,top:0,bottom:0,borderRadius:8,backgroundColor:t.palette.common.black,opacity:.2,transition:t.transitions.create("opacity"),":hover":{opacity:0}}})),B=r.a.memo((function(e){var t=e.onClick;return Object(x.jsx)(y.a,{sx:{display:"flex",flexWrap:"wrap",width:"100%"},children:Object(x.jsxs)(I,{focusRipple:!0,style:{width:"100%"},onClick:t,role:"dialog-image",children:[Object(x.jsx)(P,{style:{backgroundImage:"url(".concat(S,")")}}),Object(x.jsx)(M,{})]})})})),R=n(198),q=n(200),D=n(201),T=r.a.memo((function(e){var t=e.item,n=e.onClick,a=Object(i.b)(),r=Object(o.a)(a,2)[1],c=t.name,s=t.price,l=function(){r({type:"edit",payload:{name:c,price:s}}),n()};return Object(x.jsxs)(R.a,{variant:"outlined",sx:{width:[1,1,.3],m:1,borderColor:"#e9e9e9",textAlign:"center",borderRadius:4},children:[Object(x.jsxs)(q.a,{children:[Object(x.jsx)(B,{onClick:l}),Object(x.jsxs)(v.a,{variant:"body1",color:"text.secondary",sx:{mt:2},children:[c," - ","$"+s]})]}),Object(x.jsx)(D.a,{sx:{display:"flex",justifyContent:"center",mb:2,mx:1},children:Object(x.jsx)(k.a,{variant:"contained",fullWidth:!0,onClick:l,role:"dialog-button",children:"Choose"})})]})})),Y=n(9),$=n(182),F=n(189),G=n(190),H=n(202),J=n(203),K=n(187),N=n(181),V=n(185),E=n(204),L=Array.from({length:9}).map((function(e,t){return"Pizza Topping #".concat(t+1)})),Q=Array.from({length:3}).map((function(e,t){return"Pizza Size #".concat(t+1)}));function U(e){var t=e.open,n=e.onClose,r=a.useState({toppings:new Set,size:"Pizza Size #1"}),i=Object(o.a)(r,2),s=i[0],l=i[1],j=Object(c.b)().enqueueSnackbar,b=function(){n(null)},p=function(e){var t=e.target.name,n=s.toppings.has(t),a=new Set(s.toppings);n?a.delete(t):a.add(t),l((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{toppings:a})}))};return Object(x.jsx)($.a,{onClose:b,open:t,maxWidth:"lg",role:"dialog",children:Object(x.jsxs)(y.a,{component:"form",onSubmit:function(e){e.preventDefault(),s.toppings.size>0?n({size:s.size,toppings:Array.from(s.toppings)}):j("Must choose at least one topping",{variant:"error"})},children:[Object(x.jsxs)(F.a,{children:[Object(x.jsx)(y.a,{children:Object(x.jsx)(G.a,{children:Object(x.jsx)(H.a,{children:Object(x.jsx)(d.a,{sx:{columnCount:[1,2,3]},children:L.map((function(e){var t=s.toppings.has(e);return Object(x.jsx)(u.a,{disablePadding:!0,sx:{breakInside:"avoid"},children:Object(x.jsx)(J.a,{control:Object(x.jsx)(K.a,{checked:t,onChange:p,name:e}),label:e})},e)}))})})})}),Object(x.jsx)(y.a,{children:Object(x.jsx)(G.a,{children:Object(x.jsx)(N.a,{"aria-label":"size",defaultValue:Q[0],name:"size",value:s.size,onChange:function(e){l((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{size:e.target.value})}))},children:Q.map((function(e){return Object(x.jsx)(J.a,{control:Object(x.jsx)(V.a,{}),value:e,label:e},e)}))})})})]}),Object(x.jsx)(E.a,{children:Object(x.jsxs)(y.a,{display:"flex",flexGrow:"1",justifyContent:"space-evenly",children:[Object(x.jsx)(k.a,{variant:"contained",type:"submit",fullWidth:!0,sx:{m:2},children:"Add to Basket"}),Object(x.jsx)(k.a,{variant:"contained",color:"secondary",onClick:b,fullWidth:!0,sx:{m:2},children:"Cancel"})]})})]})})}function X(e){var t=e.open,n=e.onClose,a=Object(i.b)(),r=Object(o.a)(a,2),s=r[0],l=r[1],d=Object(c.b)().enqueueSnackbar,u=s.editing;return Object(x.jsx)(U,{open:t,onClose:function(e){e?(l({type:"create",payload:Object(Y.a)(Object(Y.a)({quantity:1},u),e),toast:"create"}),d("Added an item to Basket",{variant:"success"})):l({type:"edit",payload:null}),n()}},u?u.id:"none")}var Z=Array.from({length:6}).map((function(e,t){return{id:t,name:"Pizza Name ".concat(t+1),price:99}})),_=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(y.a,{sx:{flexGrow:1,width:[1,1,.7],display:"flex",flexWrap:"wrap",my:1},children:Z.map((function(e){return Object(x.jsx)(T,{item:e,onClick:function(){return a(!0)}},e.id)}))}),Object(x.jsx)(X,{open:n,onClose:function(){return a(!1)}})]})};function ee(e){var t=e.api;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(y.a,{sx:{display:"flex",flexDirection:["column","column","row"],alignItems:"flex-start",minHeight:"100vh"},children:[Object(x.jsx)(_,{}),Object(x.jsx)(w,{api:t})]})})}}}]);
//# sourceMappingURL=4.5b41886c.chunk.js.map